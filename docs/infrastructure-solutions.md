# Инфраструктурные решения

## Оглавление

- [Инфраструктурные решения](#инфраструктурные-решения)
  - [Оглавление](#оглавление)
  - [Именование файлов и каталогов](#именование-файлов-и-каталогов)
  - [Структура проекта](#структура-проекта)
  - [Структура каталога компонента](#структура-каталога-компонента)
  - [Обновление зависимостей](#обновление-зависимостей)
    - [Использование `npm audit`](#использование-npm-audit)

## Именование файлов и каталогов

Допустимы два стиля именования файлов:

- **`PascalCase`** — используется для файлов, содержащих React-компоненты.
- **`kebab-case`** — используется для всех остальных файлов (всё остальное).

Такой подход позволяет однозначно определить назначение файла по его имени.

## Структура проекта

Все исходные файлы проекта располагаются в каталоге `src`. В настоящее время структура каталогов может отличаться от финальной, однако мы придерживаемся следующих правил организации, направленных на повышение удобства поддержки и масштабирования проекта:

```bash
src/
├── components/
│   ├── ui/                   # Универсальные переиспользуемые ui компоненты
│   ├── features/             # Компоненты, переиспользуемые на разных страницах с разными доменами. Здесь можно писать бизнес логику
│   ├── pages-features/       # Компоненты, переиспользуемые внутри одной доменной области (уникальные. например, /about и /about-id). Здесь можно писать бизнес логику
│   └── pages/                # Компоненты контента страниц(так называемые layout)
│
├── constants/                # Константы
│   ├── application/          # Константы верхнего уровня: routing, errors и т.д.
│   ├── libs/                 # Константы, связанные со сторонними библиотеками
│   └── features/             # Константы, связанные с переиспользуемой функциональностью
│
├── utils/                    # Вспомогательные функции. Имеют ту же структуру, что и constants
├── pages/                    # Компоненты страниц (Next.js routing)(кажется этот pages лишний)
├── store/                    # Глобальное хранилище и slice'ы состояния
├── types/                    # Глобальные и локальные типы
└── styles/                   # Стили проекта
```

## Структура каталога компонента

Каталог с компонентом должен содержать **только** следующие допустимые подкаталоги и файлы:

```bash
Example/
├── api/ 							# api
├── queries/					# queries
├── components/       # Вложенные компоненты
├── constants/        # Константы, специфичные для компонента
├── styles/           # Локальные стили
├── types/            # Типы, используемые компонентом
├── utils/            # Вспомогательные функции
├── test/             # Тесты для компонента
└── index.tsx         # Точка входа (основной компонент)
```

Прочие файлы и каталоги внутри компонентного модуля не допускаются без предварительного согласования.

## Обновление зависимостей

### Использование `npm audit`

После установки нового пакета или обновления существующих зависимостей необходимо выполнять команду `npm audit`. Эта команда анализирует дерево зависимостей проекта и выявляет потенциально уязвимые или вредоносные пакеты, формируя отчёт с указанием уровня критичности и рекомендациями по их устранению.

Регулярное использование npm audit является обязательным требованием. Такая практика позволяет поддерживать высокий уровень безопасности проекта, предотвращает интеграцию зависимостей с известными уязвимостями и снижает технические риски на этапе разработки. При обнаружении критических проблем следует в первую очередь попытаться обновить зависимости. В случае невозможности автоматического исправления разработчик обязан зафиксировать проблему в системе управления задачами и уведомить команду для дальнейшей обработки.
